{"remainingRequest":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\router\\beforeEach.js","dependencies":[{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\router\\beforeEach.js","mtime":1629018981103},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0RlZnQvRGVza3RvcC9tZWRpbWkvbWVkaW1pLW9mZmljZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvaW5kZXguanMnOwppbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnbG9kYXNoJzsKCnZhciBiZWZvcmVFYWNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAodG8ubWV0YS5yZXF1aXJlc0F1dGgpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGlmIChpc0VtcHR5KHN0b3JlLnN0YXRlLmF1dGgubG9nZ2VkSW5Vc2VyKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnYXV0aC9jaGVja0F1dGhUb2tlbicpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgaWYgKGlzRW1wdHkoc3RvcmUuc3RhdGUuYXV0aC5sb2dnZWRJblVzZXIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KHsKICAgICAgICAgICAgICBuYW1lOiAnTG9naW4nCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gYmVmb3JlRWFjaChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgYmVmb3JlRWFjaDs="},{"version":3,"sources":["C:/Users/Deft/Desktop/medimi/medimi-office/src/router/beforeEach.js"],"names":["store","isEmpty","beforeEach","to","from","next","meta","requiresAuth","state","auth","loggedInUser","dispatch","name"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,kBAAlB;AACA,SAASC,OAAT,QAAwB,QAAxB;;AAIA,IAAMC,UAAU;AAAA,qEAAG,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA,gBAGbF,EAAE,CAACG,IAAH,CAAQC,YAHK;AAAA;AAAA;AAAA;;AAAA,6CAGgBF,IAAI,EAHpB;;AAAA;AAAA,gBAMbJ,OAAO,CAACD,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiBC,YAAlB,CANM;AAAA;AAAA;AAAA;;AAAA,6CAMkCL,IAAI,EANtC;;AAAA;AAAA;AAAA,mBAQXL,KAAK,CAACW,QAAN,CAAe,qBAAf,CARW;;AAAA;AAAA,gBAUbV,OAAO,CAACD,KAAK,CAACQ,KAAN,CAAYC,IAAZ,CAAiBC,YAAlB,CAVM;AAAA;AAAA;AAAA;;AAAA,6CAUkCL,IAAI,EAVtC;;AAAA;AAAA,6CAYVA,IAAI,CAAC;AAAEO,cAAAA,IAAI,EAAE;AAAR,aAAD,CAZM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVV,UAAU;AAAA;AAAA;AAAA,GAAhB;;AAmBA,eAAeA,UAAf","sourcesContent":["import store from '@/store/index.js'\r\nimport { isEmpty } from 'lodash'\r\n\r\n\r\n\r\nconst beforeEach = async (to, from, next) => {\r\n\r\n  // if we don't need authentication\r\n  if(!to.meta.requiresAuth) return next()\r\n\r\n  // if logged in user is already present we go next\r\n  if(!isEmpty(store.state.auth.loggedInUser)) return next()\r\n\r\n  await store.dispatch('auth/checkAuthToken')\r\n\r\n  if(!isEmpty(store.state.auth.loggedInUser)) return next()\r\n\r\n  return next({ name: 'Login' })\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport default beforeEach;"]}]}