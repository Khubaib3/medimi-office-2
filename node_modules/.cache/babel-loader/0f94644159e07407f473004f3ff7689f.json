{"remainingRequest":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\store\\modules\\auth.js","mtime":1628952190055},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0RlZnQvRGVza3RvcC9tZWRpbWkvbWVkaW1pLW9mZmljZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICJsb2Rhc2giOyAvLyBpbXBvcnQgbG9jYWxmb3JhZ2UgZnJvbSAnbG9jYWxmb3JhZ2UnCgppbXBvcnQgYXBpIGZyb20gIi4uLy4uL3NlcnZpY2VzL2FwaSI7CnZhciBzdGF0ZSA9IHsKICBsb2dnZWRJblVzZXI6IG51bGwsCiAgbG9naW5DcmVkZW50aWFsczogbnVsbAp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9MT0dHRURfSU5fVVNFUjogZnVuY3Rpb24gU0VUX0xPR0dFRF9JTl9VU0VSKHN0YXRlLCBwYXlsb2FkKSB7CiAgICBzdGF0ZS5sb2dnZWRJblVzZXIgPSBwYXlsb2FkOwogIH0sCiAgU0VUX0xPR0lOX0NSRURFTlRJQUxTOiBmdW5jdGlvbiBTRVRfTE9HSU5fQ1JFREVOVElBTFMoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLmxvZ2luQ3JlZGVudGlhbHMgPSBwYXlsb2FkOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlLCBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBjb21taXQoIlNFVF9MT0dJTl9DUkVERU5USUFMUyIsIHBheWxvYWQpOwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBhcGkucG9zdCgnL3VzZXIvbG9naW4nLCBzdGF0ZS5sb2dpbkNyZWRlbnRpYWxzKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdCgiRXJyb3IgaW4gbG9naW4iKSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImF1dGhUb2tlbiIsIGRhdGEuZGF0YS5yZXN1bHQudG9rZW4pOwogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX0xPR0dFRF9JTl9VU0VSIiwgZGF0YS5kYXRhLnJlc3VsdC51c2VyRGF0YSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZXNvbHZlKGRhdGEpKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQudDApOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxM11dKTsKICAgIH0pKSgpOwogIH0sCiAgbG9nb3V0RnJvbUZpcmViYXNlOiBmdW5jdGlvbiBsb2dvdXRGcm9tRmlyZWJhc2UoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBmYi5hdXRoLnNpZ25PdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGF5bG9hZCA9IG51bGw7CiAgICAgICAgY29tbWl0KCJTRVRfTE9HR0VEX0lOX1VTRVIiLCBwYXlsb2FkKTsKICAgICAgICBjb21taXQoIlNFVF9MT0dHRURfSU5fVVNFUl9ST0xFIiwgcGF5bG9hZCk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0pOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["C:/Users/Deft/Desktop/medimi/medimi-office/src/store/modules/auth.js"],"names":["isEmpty","api","state","loggedInUser","loginCredentials","mutations","SET_LOGGED_IN_USER","payload","SET_LOGIN_CREDENTIALS","actions","login","commit","post","data","Promise","reject","localStorage","setItem","result","token","userData","resolve","logoutFromFirebase","fb","auth","signOut","then","catch","err","namespaced"],"mappings":";;;AAAA,SAASA,OAAT,QAAwB,QAAxB,C,CACA;;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,IAAMC,KAAK,GAAG;AACZC,EAAAA,YAAY,EAAE,IADF;AAEZC,EAAAA,gBAAgB,EAAE;AAFN,CAAd;AAMA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,kBADgB,8BACGJ,KADH,EACUK,OADV,EACmB;AACjCL,IAAAA,KAAK,CAACC,YAAN,GAAqBI,OAArB;AACD,GAHe;AAKhBC,EAAAA,qBALgB,iCAKMN,KALN,EAKaK,OALb,EAKsB;AACpCL,IAAAA,KAAK,CAACE,gBAAN,GAAyBG,OAAzB;AACD;AAPe,CAAlB;AAUA,IAAME,OAAO,GAAG;AAGRC,EAAAA,KAHQ,uBAGiBH,OAHjB,EAG0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA1BL,cAAAA,KAA0B,QAA1BA,KAA0B,EAAnBS,MAAmB,QAAnBA,MAAmB;AACtCA,cAAAA,MAAM,CAAC,uBAAD,EAA0BJ,OAA1B,CAAN;AADsC;AAAA;AAAA,qBAGjBN,GAAG,CAACW,IAAJ,CAAS,aAAT,EAAwBV,KAAK,CAACE,gBAA9B,CAHiB;;AAAA;AAG9BS,cAAAA,IAH8B;;AAAA,kBAIhCA,IAJgC;AAAA;AAAA;AAAA;;AAAA,+CAInBC,OAAO,CAACC,MAAR,CAAe,gBAAf,CAJmB;;AAAA;AAKpCC,cAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCJ,IAAI,CAACA,IAAL,CAAUK,MAAV,CAAiBC,KAAnD;AACAR,cAAAA,MAAM,CAAC,oBAAD,EAAuBE,IAAI,CAACA,IAAL,CAAUK,MAAV,CAAiBE,QAAxC,CAAN;AANoC,+CAO7BN,OAAO,CAACO,OAAR,CAAgBR,IAAhB,CAP6B;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYvC,GAfa;AAiBdS,EAAAA,kBAjBc,qCAiBiB;AAAA,QAAVX,MAAU,SAAVA,MAAU;AAC7B,WAAO,IAAIG,OAAJ,CAAY,UAACO,OAAD,EAAUN,MAAV,EAAqB;AACtCQ,MAAAA,EAAE,CAACC,IAAH,CAAQC,OAAR,GAAkBC,IAAlB,CAAuB,YAAM;AAC3B,YAAMnB,OAAO,GAAG,IAAhB;AACAI,QAAAA,MAAM,CAAC,oBAAD,EAAuBJ,OAAvB,CAAN;AACAI,QAAAA,MAAM,CAAC,yBAAD,EAA4BJ,OAA5B,CAAN;AACAc,QAAAA,OAAO;AACR,OALD,EAKGM,KALH,CAKS,UAACC,GAAD,EAAS;AAChBb,QAAAA,MAAM,CAACa,GAAD,CAAN;AACD,OAPD;AAQD,KATM,CAAP;AAUD;AA5Ba,CAAhB;AA+BA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEb3B,EAAAA,KAAK,EAALA,KAFa;AAGbG,EAAAA,SAAS,EAATA,SAHa;AAIbI,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import { isEmpty } from \"lodash\";\r\n// import localforage from 'localforage'\r\nimport api from \"../../services/api\";\r\n\r\nconst state = {\r\n  loggedInUser: null,\r\n  loginCredentials: null\r\n\r\n};\r\n\r\nconst mutations = {\r\n  SET_LOGGED_IN_USER(state, payload) {\r\n    state.loggedInUser = payload;\r\n  },\r\n\r\n  SET_LOGIN_CREDENTIALS(state, payload) {\r\n    state.loginCredentials = payload;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n\r\n\r\n  async login({ state, commit }, payload) {\r\n    commit(\"SET_LOGIN_CREDENTIALS\", payload);\r\n    try {\r\n      const data = await api.post('/user/login', state.loginCredentials)\r\n      if(!data) return Promise.reject(\"Error in login\")\r\n      localStorage.setItem(\"authToken\", data.data.result.token)\r\n      commit(\"SET_LOGGED_IN_USER\", data.data.result.userData)\r\n      return Promise.resolve(data)\r\n    } catch (error) {\r\n      return error\r\n    }\r\n  \r\n  },\r\n\r\n  logoutFromFirebase({ commit }) {\r\n    return new Promise((resolve, reject) => {\r\n      fb.auth.signOut().then(() => {\r\n        const payload = null\r\n        commit(\"SET_LOGGED_IN_USER\", payload)\r\n        commit(\"SET_LOGGED_IN_USER_ROLE\", payload);\r\n        resolve()\r\n      }).catch((err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n};\r\n"]}]}