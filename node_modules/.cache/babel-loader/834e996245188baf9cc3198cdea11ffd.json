{"remainingRequest":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\store\\modules\\auth.js","mtime":1629802198972},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0RlZnQvRGVza3RvcC9tZWRpbWkvbWVkaW1pLW9mZmljZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICJsb2Rhc2giOyAvLyBpbXBvcnQgbG9jYWxmb3JhZ2UgZnJvbSAnbG9jYWxmb3JhZ2UnCgppbXBvcnQgYXBpIGZyb20gIi4uLy4uL3NlcnZpY2VzL2FwaSI7CnZhciBzdGF0ZSA9IHsKICBsb2dnZWRJblVzZXI6IG51bGwsCiAgbG9naW5DcmVkZW50aWFsczogbnVsbCwKICBob3NwaXRhbDogbnVsbAp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9MT0dHRURfSU5fVVNFUjogZnVuY3Rpb24gU0VUX0xPR0dFRF9JTl9VU0VSKHN0YXRlLCBwYXlsb2FkKSB7CiAgICBzdGF0ZS5sb2dnZWRJblVzZXIgPSBwYXlsb2FkOwogIH0sCiAgU0VUX0xPR0lOX0NSRURFTlRJQUxTOiBmdW5jdGlvbiBTRVRfTE9HSU5fQ1JFREVOVElBTFMoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLmxvZ2luQ3JlZGVudGlhbHMgPSBwYXlsb2FkOwogIH0sCiAgU0VUX0hPU1BJVEFMOiBmdW5jdGlvbiBTRVRfSE9TUElUQUwoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLmhvc3BpdGFsID0gcGF5bG9hZDsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlLCBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBjb21taXQoIlNFVF9MT0dJTl9DUkVERU5USUFMUyIsIHBheWxvYWQpOwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBhcGkucG9zdCgnL3VzZXIvbG9naW4nLCBzdGF0ZS5sb2dpbkNyZWRlbnRpYWxzKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoIkVycm9yIGluIGxvZ2luIikpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhdXRoVG9rZW4iLCByZXN1bHQuZGF0YS5yZXN1bHQudG9rZW4pOwogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX0xPR0dFRF9JTl9VU0VSIiwgcmVzdWx0LmRhdGEucmVzdWx0LnVzZXJEYXRhKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUoc3RhdGUubG9nZ2VkSW5Vc2VyKSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgMTNdXSk7CiAgICB9KSkoKTsKICB9LAogIGNoZWNrQXV0aFRva2VuOiBmdW5jdGlvbiBjaGVja0F1dGhUb2tlbihfcmVmMikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCB0b2tlbiwgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFRva2VuJyk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0KCIvdXNlci9jaGVja0F1dGgvIi5jb25jYXQodG9rZW4pKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoIkVycm9yIGluIGxvZ2luIikpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX0xPR0dFRF9JTl9VU0VSIiwgcmVzdWx0LmRhdGEucmVzdWx0LnVzZXJEYXRhKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdC5kYXRhLnJlc3VsdC51c2VyRGF0YSkpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1sxLCAxMl1dKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["C:/Users/Deft/Desktop/medimi/medimi-office/src/store/modules/auth.js"],"names":["isEmpty","api","state","loggedInUser","loginCredentials","hospital","mutations","SET_LOGGED_IN_USER","payload","SET_LOGIN_CREDENTIALS","SET_HOSPITAL","actions","login","commit","post","result","Promise","reject","localStorage","setItem","data","token","userData","resolve","checkAuthToken","getItem","get","namespaced"],"mappings":";;;AAAA,SAASA,OAAT,QAAwB,QAAxB,C,CACA;;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,IAAMC,KAAK,GAAG;AACZC,EAAAA,YAAY,EAAE,IADF;AAEZC,EAAAA,gBAAgB,EAAE,IAFN;AAGZC,EAAAA,QAAQ,EAAE;AAHE,CAAd;AAMA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,kBADgB,8BACGL,KADH,EACUM,OADV,EACmB;AACjCN,IAAAA,KAAK,CAACC,YAAN,GAAqBK,OAArB;AACD,GAHe;AAKhBC,EAAAA,qBALgB,iCAKMP,KALN,EAKaM,OALb,EAKsB;AACpCN,IAAAA,KAAK,CAACE,gBAAN,GAAyBI,OAAzB;AACD,GAPe;AAQhBE,EAAAA,YARgB,wBAQHR,KARG,EAQIM,OARJ,EAQa;AAC3BN,IAAAA,KAAK,CAACG,QAAN,GAAiBG,OAAjB;AACD;AAVe,CAAlB;AAaA,IAAMG,OAAO,GAAG;AAGRC,EAAAA,KAHQ,uBAGiBJ,OAHjB,EAG0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA1BN,cAAAA,KAA0B,QAA1BA,KAA0B,EAAnBW,MAAmB,QAAnBA,MAAmB;AACtCA,cAAAA,MAAM,CAAC,uBAAD,EAA0BL,OAA1B,CAAN;AADsC;AAAA;AAAA,qBAGfP,GAAG,CAACa,IAAJ,CAAS,aAAT,EAAwBZ,KAAK,CAACE,gBAA9B,CAHe;;AAAA;AAG9BW,cAAAA,MAH8B;;AAAA,kBAIhCA,MAJgC;AAAA;AAAA;AAAA;;AAAA,+CAIjBC,OAAO,CAACC,MAAR,CAAe,gBAAf,CAJiB;;AAAA;AAKpCC,cAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCJ,MAAM,CAACK,IAAP,CAAYL,MAAZ,CAAmBM,KAArD;AACAR,cAAAA,MAAM,CAAC,oBAAD,EAAuBE,MAAM,CAACK,IAAP,CAAYL,MAAZ,CAAmBO,QAA1C,CAAN;AANoC,+CAO7BN,OAAO,CAACO,OAAR,CAAgBrB,KAAK,CAACC,YAAtB,CAP6B;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWvC,GAda;AAgBRqB,EAAAA,cAhBQ,iCAgB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjBtB,cAAAA,KAAiB,SAAjBA,KAAiB,EAAVW,MAAU,SAAVA,MAAU;AAAA;AAEhCQ,cAAAA,KAFgC,GAExBH,YAAY,CAACO,OAAb,CAAqB,WAArB,CAFwB;AAAA;AAAA,qBAIfxB,GAAG,CAACyB,GAAJ,2BAA2BL,KAA3B,EAJe;;AAAA;AAI9BN,cAAAA,MAJ8B;;AAAA,kBAKhCA,MALgC;AAAA;AAAA;AAAA;;AAAA,gDAKjBC,OAAO,CAACC,MAAR,CAAe,gBAAf,CALiB;;AAAA;AAMpCJ,cAAAA,MAAM,CAAC,oBAAD,EAAuBE,MAAM,CAACK,IAAP,CAAYL,MAAZ,CAAmBO,QAA1C,CAAN;AANoC,gDAO7BN,OAAO,CAACO,OAAR,CAAgBR,MAAM,CAACK,IAAP,CAAYL,MAAZ,CAAmBO,QAAnC,CAP6B;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWvC;AA3Ba,CAAhB;AAiCA,eAAe;AACbK,EAAAA,UAAU,EAAE,IADC;AAEbzB,EAAAA,KAAK,EAALA,KAFa;AAGbI,EAAAA,SAAS,EAATA,SAHa;AAIbK,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import { isEmpty } from \"lodash\";\r\n// import localforage from 'localforage'\r\nimport api from \"../../services/api\";\r\n\r\nconst state = {\r\n  loggedInUser: null,\r\n  loginCredentials: null,\r\n  hospital: null\r\n};\r\n\r\nconst mutations = {\r\n  SET_LOGGED_IN_USER(state, payload) {\r\n    state.loggedInUser = payload;\r\n  },\r\n\r\n  SET_LOGIN_CREDENTIALS(state, payload) {\r\n    state.loginCredentials = payload;\r\n  },\r\n  SET_HOSPITAL(state, payload) {\r\n    state.hospital = payload\r\n  }\r\n};\r\n\r\nconst actions = {\r\n\r\n\r\n  async login({ state, commit }, payload) {\r\n    commit(\"SET_LOGIN_CREDENTIALS\", payload);\r\n    try {\r\n      const result = await api.post('/user/login', state.loginCredentials)\r\n      if(!result) return Promise.reject(\"Error in login\")\r\n      localStorage.setItem(\"authToken\", result.data.result.token)\r\n      commit(\"SET_LOGGED_IN_USER\", result.data.result.userData)\r\n      return Promise.resolve(state.loggedInUser)\r\n    } catch (error) {\r\n      return error\r\n    }\r\n  },\r\n\r\n  async checkAuthToken({ state, commit }) {\r\n    try {\r\n      let token = localStorage.getItem('authToken')\r\n      \r\n      const result = await api.get(`/user/checkAuth/${token}`)\r\n      if(!result) return Promise.reject(\"Error in login\")\r\n      commit(\"SET_LOGGED_IN_USER\", result.data.result.userData)\r\n      return Promise.resolve(result.data.result.userData)\r\n    } catch (error) {\r\n      return error\r\n    }\r\n  }\r\n\r\n\r\n\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n};\r\n"]}]}