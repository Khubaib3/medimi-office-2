{"remainingRequest":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\views\\hospitalHead\\DepAppointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\views\\hospitalHead\\DepAppointments.vue","mtime":1629383643158},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnDQppbXBvcnQgUHJlQXBwb2ludG1lbnQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9ob3NwaXRhbC9kZXBhcnRtZW50L1ByZUFwcG9pbnRtZW50LnZ1ZSc7DQpleHBvcnQgZGVmYXVsdCB7DQoNCiAgY29tcG9uZW50czogeyBQcmVBcHBvaW50bWVudCB9LA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRlcGFydG1lbnRJdGVtczogW10sDQogICAgICBzZWxlY3RlZERlcGFydG1lbnQ6IG51bGwsDQogICAgICAvLyBDYWxlbmRhcg0KICAgICAgZm9jdXM6ICIiLA0KICAgICAgY2FsZW5kYXJUeXBlOiAid2VlayIsDQogICAgICBsYW5nOiAiZnIiLA0KICAgICAgYXBwb2ludG1lbnRzOiBbXSwNCg0KICAgICAgLy8gYXBwb2ludG1lbnQNCiAgICAgIG5ld0RpYWxvZzogZmFsc2UsDQogICAgICBmb3JtVHlwZTogZmFsc2UsDQogICAgICANCiAgICB9Ow0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoew0KICAgICAgZGVwYXJ0bWVudHM6IChzdGF0ZSkgPT4gc3RhdGUuZGVwYXJ0bWVudC5kZXBhcnRtZW50cw0KICAgIH0pDQogIH0sDQoNCiAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICBhd2FpdCB0aGlzLmdldERlcGFydG1lbnRzKCk7DQogICAgdGhpcy5kZXBhcnRtZW50cy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7DQogICAgICB0aGlzLmRlcGFydG1lbnRJdGVtcy5wdXNoKHZhbHVlLmN1c3RvbUlkKQ0KICAgIH0pDQoNCiAgICAvLyBDYWxlbmRhcg0KICAgIGlmKHRoaXMuc2VsZWN0ZWREZXBhcnRtZW50ICE9IG51bGwpIHsNCiAgICAgIHRoaXMuJHJlZnMuY2FsZW5kYXIuY2hlY2tDaGFuZ2UoKTsNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLmNhbGVuZGFyLm1vdmUoMSk7DQogICAgICB9LCAxMCk7DQogICAgICB0aGlzLiRyZWZzLmNhbGVuZGFyLm1vdmUoLTEpOw0KDQogICAgICAvLyBBcHBvaW50bWVudHMNCiAgICAgIHRoaXMuZ2V0QXBwb2ludG1lbnRzKCkNCiAgICB9DQogICAgDQogIH0sDQoNCiAgbWV0aG9kczogew0KDQogICAgZ2V0QXBwb2ludG1lbnRzKCkgew0KICAgICAgY29uc29sZS5sb2codGhpcy5jYWxlbmRhclR5cGUpDQogICAgICBjb25zb2xlLmxvZyhtb21lbnQoKS5zdGFydE9mKCdtb250aCcpLnRvSVNPU3RyaW5nKCkpDQogICAgICBjb25zb2xlLmxvZyhtb21lbnQoKS5lbmRPZignbW9udGgnKS50b0lTT1N0cmluZygpKQ0KICAgIH0sDQoNCiAgICB0b2dnbGVOZXdEaWFsb2coKSB7DQogICAgICB0aGlzLm5ld0RpYWxvZyA9ICF0aGlzLm5ld0RpYWxvZw0KICAgIH0sDQoNCiAgICBpbnRlcnZhbEZvcm1hdChpbnRlcnZhbCkgew0KICAgICAgcmV0dXJuIGludGVydmFsLnRpbWU7DQogICAgfSwNCiAgICBzZXRUb2RheSgpIHsNCiAgICAgIHRoaXMuZm9jdXMgPSAiIjsNCiAgICB9LA0KICAgIHByZXYoKSB7DQogICAgICB0aGlzLiRyZWZzLmNhbGVuZGFyLnByZXYoKTsNCiAgICB9LA0KICAgIG5leHQoKSB7DQogICAgICB0aGlzLiRyZWZzLmNhbGVuZGFyLm5leHQoKTsNCiAgICB9LA0KDQogICAgLi4ubWFwQWN0aW9ucyh7DQogICAgICBnZXREZXBhcnRtZW50czogImRlcGFydG1lbnQvZ2V0RGVwYXJ0bWVudHMiLA0KICAgIH0pDQogIH0sDQp9Ow0K"},{"version":3,"sources":["DepAppointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"DepAppointments.vue","sourceRoot":"src/views/hospitalHead","sourcesContent":["<template>\r\n  <v-sheet class=\"pa-5\">\r\n    <div class=\"d-flex align-center justify-space-between flex-column flex-sm-row\">\r\n      <h2>Agendas des services</h2>\r\n      <div style=\"width: 50%\">\r\n      <v-select\r\n        :items=\"departmentItems\"\r\n        v-model=\"selectedDepartment\"\r\n        outlined\r\n        hide-details\r\n        dense\r\n      />\r\n      </div>\r\n    </div>\r\n    <v-divider class=\"mt-5\"></v-divider>\r\n    <v-card flat v-if=\"selectedDepartment != null\">\r\n      <v-card-text class=\"d-flex flex-column flex-sm-column flex-md-row align-center justify-space-between flex-row mb-3\">\r\n        <div class=\"left order-2 order-md-1 mb-2 mb-md-0\">\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            class=\"mr-2\"\r\n            color=\"grey darken-2\"\r\n            @click.stop=\"prev\"\r\n          >\r\n            <v-icon small> mdi-chevron-left </v-icon>\r\n          </v-btn>\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            class=\"mr-2\"\r\n            @click.stop=\"next\"\r\n          >\r\n            <v-icon small> mdi-chevron-right </v-icon>\r\n          </v-btn>\r\n          <v-btn\r\n            outlined\r\n            small\r\n            text\r\n            class=\"mr-4\"\r\n            color=\"grey darken-2\"\r\n            @click.stop=\"setToday\"\r\n          >\r\n            Today\r\n          </v-btn>\r\n        </div>\r\n        <div class=\"middle order-1 order-md-2 mb-2 mb-md-0\">\r\n          <v-toolbar-title v-if=\"$refs.calendar\">\r\n            {{ $refs.calendar.title }}\r\n          </v-toolbar-title>\r\n        </div>\r\n        <div class=\"right order-3 order-md-3 mb-2 mb-md-0\">\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            class=\"mr-2\"\r\n            @click.stop=\"calendarType = 'month'\"\r\n          >\r\n            Month\r\n          </v-btn>\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            class=\"mr-2\"\r\n            @click.stop=\"calendarType = 'week'\"\r\n          >\r\n            Week\r\n          </v-btn>\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            @click.stop=\"calendarType = 'day'\"\r\n          >\r\n            Day\r\n          </v-btn>\r\n        </div>\r\n      </v-card-text>\r\n    </v-card>\r\n    <v-sheet class=\"calendar-sheet\" style=\"height: 65vh\" v-if=\"selectedDepartment != null\">\r\n      <v-btn\r\n        @click.stop=\"toggleNewDialog\"\r\n        color=\"#38957F\"\r\n        dark\r\n        absolute\r\n        bottom\r\n        right\r\n        fab\r\n      >\r\n        <v-icon>mdi-plus</v-icon>\r\n      </v-btn>\r\n      <v-calendar\r\n        ref=\"calendar\"\r\n        v-model=\"focus\"\r\n        :locale=\"lang\"\r\n        :events=\"appointments\"\r\n        :interval-format=\"intervalFormat\"\r\n        :short-weekdays=\"false\"\r\n        color=\"primary\"\r\n        :type=\"calendarType\"\r\n      >\r\n      </v-calendar>\r\n    </v-sheet>\r\n    <v-dialog v-model=\"newDialog\" width=\"720\" persistent scrollable>\r\n      <pre-appointment :edit=\"formType\" :department=\"selectedDepartment\" :toggle=\"toggleNewDialog\"/>\r\n    </v-dialog>\r\n  </v-sheet>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport moment from 'moment'\r\nimport PreAppointment from '../../components/hospital/department/PreAppointment.vue';\r\nexport default {\r\n\r\n  components: { PreAppointment },\r\n\r\n  data() {\r\n    return {\r\n      departmentItems: [],\r\n      selectedDepartment: null,\r\n      // Calendar\r\n      focus: \"\",\r\n      calendarType: \"week\",\r\n      lang: \"fr\",\r\n      appointments: [],\r\n\r\n      // appointment\r\n      newDialog: false,\r\n      formType: false,\r\n      \r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapState({\r\n      departments: (state) => state.department.departments\r\n    })\r\n  },\r\n\r\n  async mounted() {\r\n    await this.getDepartments();\r\n    this.departments.forEach((value, key) => {\r\n      this.departmentItems.push(value.customId)\r\n    })\r\n\r\n    // Calendar\r\n    if(this.selectedDepartment != null) {\r\n      this.$refs.calendar.checkChange();\r\n      setTimeout(() => {\r\n        this.$refs.calendar.move(1);\r\n      }, 10);\r\n      this.$refs.calendar.move(-1);\r\n\r\n      // Appointments\r\n      this.getAppointments()\r\n    }\r\n    \r\n  },\r\n\r\n  methods: {\r\n\r\n    getAppointments() {\r\n      console.log(this.calendarType)\r\n      console.log(moment().startOf('month').toISOString())\r\n      console.log(moment().endOf('month').toISOString())\r\n    },\r\n\r\n    toggleNewDialog() {\r\n      this.newDialog = !this.newDialog\r\n    },\r\n\r\n    intervalFormat(interval) {\r\n      return interval.time;\r\n    },\r\n    setToday() {\r\n      this.focus = \"\";\r\n    },\r\n    prev() {\r\n      this.$refs.calendar.prev();\r\n    },\r\n    next() {\r\n      this.$refs.calendar.next();\r\n    },\r\n\r\n    ...mapActions({\r\n      getDepartments: \"department/getDepartments\",\r\n    })\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}