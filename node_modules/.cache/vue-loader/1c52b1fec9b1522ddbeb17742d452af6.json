{"remainingRequest":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\views\\hospitalHead\\DepAppointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\src\\views\\hospitalHead\\DepAppointments.vue","mtime":1629878889879},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Deft\\Desktop\\medimi\\medimi-office\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnDQppbXBvcnQgUHJlQXBwb2ludG1lbnQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9ob3NwaXRhbC9kZXBhcnRtZW50L1ByZUFwcG9pbnRtZW50LnZ1ZSc7DQppbXBvcnQgQXBwb2ludG1lbnRGb3JtIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaG9zcGl0YWwvZGVwYXJ0bWVudC9BcHBvaW50bWVudEZvcm0udnVlJzsNCmltcG9ydCBQcmV2aWV3QXBwb2ludG1lbnQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9ob3NwaXRhbC9kZXBhcnRtZW50L1ByZXZpZXdBcHBvaW50bWVudC52dWUnOw0KZXhwb3J0IGRlZmF1bHQgew0KDQogIGNvbXBvbmVudHM6IHsgUHJlQXBwb2ludG1lbnQsIEFwcG9pbnRtZW50Rm9ybSwgUHJldmlld0FwcG9pbnRtZW50IH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGVwYXJ0bWVudEl0ZW1zOiBbXSwNCiAgICAgIHNlbGVjdGVkRGVwYXJ0bWVudDogbnVsbCwNCiAgICAgIC8vIENhbGVuZGFyDQogICAgICBmb2N1czogIiIsDQogICAgICBjYWxlbmRhclR5cGU6ICJ3ZWVrIiwNCiAgICAgIGxhbmc6ICJmciIsDQogICAgICBhcHBvaW50bWVudHM6IFtdLA0KDQogICAgICAvLyBhcHBvaW50bWVudA0KICAgICAgbmV3RGlhbG9nOiBmYWxzZSwNCiAgICAgIG5ld0FwcERpYWxvZzogZmFsc2UsDQogICAgICBwcmV2aWV3QXBwRGlhbG9nOiBmYWxzZSwNCiAgICAgIGZvcm1UeXBlOiBmYWxzZSwNCiAgICAgIHNlbGVjdGVkRG9jdG9yOiB7fSwNCiAgICAgIHNlbGVjdGVkUGF0aWVudDoge30sDQoNCiAgICAgIHNlbGVjdGVkSWQ6IG51bGwsDQogICAgICANCiAgICB9Ow0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgc2VsZWN0ZWREZXBhcnRtZW50KHZhbCkgew0KICAgICAgdGhpcy5hcHBvaW50bWVudHMgPSBbXQ0KICAgICAgbGV0IGlkID0gdmFsLnNwbGl0KCdEJykNCiAgICAgIHRoaXMuZ2V0QXBwb2ludG1lbnRzKGlkWzFdKQ0KICAgIH0NCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKHsNCiAgICAgIGRlcGFydG1lbnRzOiAoc3RhdGUpID0+IHN0YXRlLmRlcGFydG1lbnQuZGVwYXJ0bWVudHMNCiAgICB9KQ0KICB9LA0KDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgYXdhaXQgdGhpcy5nZXREZXBhcnRtZW50cygpOw0KICAgIHRoaXMuZGVwYXJ0bWVudHMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gew0KICAgICAgdGhpcy5kZXBhcnRtZW50SXRlbXMucHVzaCh2YWx1ZS5jdXN0b21JZCkNCiAgICB9KQ0KDQogICAgLy8gQ2FsZW5kYXINCiAgICBpZih0aGlzLnNlbGVjdGVkRGVwYXJ0bWVudCAhPSBudWxsKSB7DQogICAgICB0aGlzLiRyZWZzLmNhbGVuZGFyLmNoZWNrQ2hhbmdlKCk7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmcy5jYWxlbmRhci5tb3ZlKDEpOw0KICAgICAgfSwgMTApOw0KICAgICAgdGhpcy4kcmVmcy5jYWxlbmRhci5tb3ZlKC0xKTsNCg0KICAgIH0NCiAgICANCiAgfSwNCg0KICBtZXRob2RzOiB7DQoNCiAgICBmaXJlQXBwb2ludG1lbnQoeyBldmVudCB9KSB7DQogICAgICB0aGlzLnNlbGVjdGVkSWQgPSBldmVudC5pZA0KICAgICAgdGhpcy50b2dnbGVQcmV2aWV3QXBwRGlhbG9nKCkNCiAgICB9LA0KDQogICAgb3Blbk5ld0FwcG9pbnRtZW50KHBhdGllbnQsIGRvY3Rvcikgew0KICAgICAgdGhpcy5zZWxlY3RlZFBhdGllbnQgPSBwYXRpZW50DQogICAgICB0aGlzLnNlbGVjdGVkRG9jdG9yID0gZG9jdG9yDQogICAgICB0aGlzLnRvZ2dsZU5ld0RpYWxvZygpDQogICAgICB0aGlzLnRvZ2dsZU5ld0FwcERpYWxvZygpDQogICAgfSwNCg0KICAgIGFzeW5jIGdldEFwcG9pbnRtZW50cyhpZCkgew0KICAgICAgbGV0IGFwcG9pbnRtZW50cyA9IGF3YWl0IHRoaXMuZ2V0QXBwb2ludG1lbnRzQnlEZXBhcnRtZW50KHsgaWQ6IGlkIH0pDQogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXBwb2ludG1lbnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHRoaXMuYXBwb2ludG1lbnRzLnB1c2goew0KICAgICAgICAgIGlkOiBgJHthcHBvaW50bWVudHNbaV0uaWR9YCwNCiAgICAgICAgICBuYW1lOiBgJHthcHBvaW50bWVudHNbaV0ucGF0aWVudE5hbWV9IC0gJHthcHBvaW50bWVudHNbaV0uZG9jdG9yTmFtZX1gLA0KICAgICAgICAgIHN0YXJ0OiBhcHBvaW50bWVudHNbaV0uc3RhcnREYXRlVGltZSwNCiAgICAgICAgICBlbmQ6IGFwcG9pbnRtZW50c1tpXS5lbmREYXRlVGltZQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICB0b2dnbGVQcmV2aWV3QXBwRGlhbG9nKCkgew0KICAgICAgdGhpcy5wcmV2aWV3QXBwRGlhbG9nID0gIXRoaXMucHJldmlld0FwcERpYWxvZw0KICAgIH0sDQoNCg0KICAgIHRvZ2dsZU5ld0FwcERpYWxvZygpIHsNCiAgICAgIHRoaXMubmV3QXBwRGlhbG9nID0gIXRoaXMubmV3QXBwRGlhbG9nDQogICAgfSwNCg0KICAgIHRvZ2dsZU5ld0RpYWxvZygpIHsNCiAgICAgIHRoaXMubmV3RGlhbG9nID0gIXRoaXMubmV3RGlhbG9nDQogICAgfSwNCg0KICAgIGludGVydmFsRm9ybWF0KGludGVydmFsKSB7DQogICAgICByZXR1cm4gaW50ZXJ2YWwudGltZTsNCiAgICB9LA0KICAgIHNldFRvZGF5KCkgew0KICAgICAgdGhpcy5mb2N1cyA9ICIiOw0KICAgIH0sDQogICAgcHJldigpIHsNCiAgICAgIHRoaXMuJHJlZnMuY2FsZW5kYXIucHJldigpOw0KICAgIH0sDQogICAgbmV4dCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuY2FsZW5kYXIubmV4dCgpOw0KICAgIH0sDQoNCiAgICAuLi5tYXBBY3Rpb25zKHsNCiAgICAgIGdldERlcGFydG1lbnRzOiAiZGVwYXJ0bWVudC9nZXREZXBhcnRtZW50cyIsDQogICAgICBnZXRBcHBvaW50bWVudHNCeURlcGFydG1lbnQ6ICJhcHBvaW50bWVudC9nZXRBcHBvaW50bWVudHNCeURlcGFydG1lbnQiDQogICAgfSkNCiAgfSwNCn07DQo="},{"version":3,"sources":["DepAppointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DepAppointments.vue","sourceRoot":"src/views/hospitalHead","sourcesContent":["<template>\r\n  <v-sheet class=\"pa-5\">\r\n    <div class=\"d-flex align-center justify-space-between flex-column flex-sm-row\">\r\n      <h2>Agendas des services</h2>\r\n      <div style=\"width: 50%\">\r\n      <v-select\r\n        :items=\"departmentItems\"\r\n        v-model=\"selectedDepartment\"\r\n        outlined\r\n        hide-details\r\n        dense\r\n      />\r\n      </div>\r\n    </div>\r\n    <v-divider class=\"mt-5\"></v-divider>\r\n    <v-card flat v-if=\"selectedDepartment != null\">\r\n      <v-card-text class=\"d-flex flex-column flex-sm-column flex-md-row align-center justify-space-between flex-row mb-3\">\r\n        <div class=\"left order-2 order-md-1 mb-2 mb-md-0\">\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            class=\"mr-2\"\r\n            color=\"grey darken-2\"\r\n            @click.stop=\"prev\"\r\n          >\r\n            <v-icon small> mdi-chevron-left </v-icon>\r\n          </v-btn>\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            class=\"mr-2\"\r\n            @click.stop=\"next\"\r\n          >\r\n            <v-icon small> mdi-chevron-right </v-icon>\r\n          </v-btn>\r\n          <v-btn\r\n            outlined\r\n            small\r\n            text\r\n            class=\"mr-4\"\r\n            color=\"grey darken-2\"\r\n            @click.stop=\"setToday\"\r\n          >\r\n            Today\r\n          </v-btn>\r\n        </div>\r\n        <div class=\"middle order-1 order-md-2 mb-2 mb-md-0\">\r\n          <v-toolbar-title v-if=\"$refs.calendar\">\r\n            {{ $refs.calendar.title }}\r\n          </v-toolbar-title>\r\n        </div>\r\n        <div class=\"right order-3 order-md-3 mb-2 mb-md-0\">\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            class=\"mr-2\"\r\n            @click.stop=\"calendarType = 'month'\"\r\n          >\r\n            Month\r\n          </v-btn>\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            class=\"mr-2\"\r\n            @click.stop=\"calendarType = 'week'\"\r\n          >\r\n            Week\r\n          </v-btn>\r\n          <v-btn\r\n            text\r\n            small\r\n            outlined\r\n            color=\"grey darken-2\"\r\n            @click.stop=\"calendarType = 'day'\"\r\n          >\r\n            Day\r\n          </v-btn>\r\n        </div>\r\n      </v-card-text>\r\n    </v-card>\r\n    <v-sheet class=\"calendar-sheet\" style=\"height: 65vh\" v-if=\"selectedDepartment != null\">\r\n      <v-btn\r\n        @click.stop=\"toggleNewDialog\"\r\n        color=\"#38957F\"\r\n        dark\r\n        absolute\r\n        bottom\r\n        right\r\n        fab\r\n      >\r\n        <v-icon>mdi-plus</v-icon>\r\n      </v-btn>\r\n      <v-calendar\r\n        ref=\"calendar\"\r\n        v-model=\"focus\"\r\n        :locale=\"lang\"\r\n        :events=\"appointments\"\r\n        :interval-format=\"intervalFormat\"\r\n        @click:event=\"fireAppointment\"\r\n        :short-weekdays=\"false\"\r\n        color=\"primary\"\r\n        :type=\"calendarType\"\r\n      >\r\n      </v-calendar>\r\n    </v-sheet>\r\n    <v-dialog v-model=\"newDialog\" width=\"720\" persistent scrollable>\r\n      <pre-appointment :edit=\"formType\" :department=\"selectedDepartment\" :toggle=\"toggleNewDialog\" :openNewAppointment=\"openNewAppointment\" />\r\n    </v-dialog>\r\n    <v-dialog v-model=\"newAppDialog\" width=\"720\" persistent scrollable>\r\n      <appointment-form :edit=\"formType\" :patient=\"selectedPatient\" :doctor=\"selectedDoctor\" :department=\"selectedDepartment\" :toggle=\"toggleNewAppDialog\"/>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"previewAppDialog\" persistent scrollable>\r\n      <preview-appointment :id=\"selectedId\" :toggle=\"togglePreviewAppDialog\"/>\r\n    </v-dialog>\r\n  </v-sheet>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport moment from 'moment'\r\nimport PreAppointment from '../../components/hospital/department/PreAppointment.vue';\r\nimport AppointmentForm from '../../components/hospital/department/AppointmentForm.vue';\r\nimport PreviewAppointment from '../../components/hospital/department/PreviewAppointment.vue';\r\nexport default {\r\n\r\n  components: { PreAppointment, AppointmentForm, PreviewAppointment },\r\n\r\n  data() {\r\n    return {\r\n      departmentItems: [],\r\n      selectedDepartment: null,\r\n      // Calendar\r\n      focus: \"\",\r\n      calendarType: \"week\",\r\n      lang: \"fr\",\r\n      appointments: [],\r\n\r\n      // appointment\r\n      newDialog: false,\r\n      newAppDialog: false,\r\n      previewAppDialog: false,\r\n      formType: false,\r\n      selectedDoctor: {},\r\n      selectedPatient: {},\r\n\r\n      selectedId: null,\r\n      \r\n    };\r\n  },\r\n\r\n  watch: {\r\n    selectedDepartment(val) {\r\n      this.appointments = []\r\n      let id = val.split('D')\r\n      this.getAppointments(id[1])\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState({\r\n      departments: (state) => state.department.departments\r\n    })\r\n  },\r\n\r\n  async mounted() {\r\n    await this.getDepartments();\r\n    this.departments.forEach((value, key) => {\r\n      this.departmentItems.push(value.customId)\r\n    })\r\n\r\n    // Calendar\r\n    if(this.selectedDepartment != null) {\r\n      this.$refs.calendar.checkChange();\r\n      setTimeout(() => {\r\n        this.$refs.calendar.move(1);\r\n      }, 10);\r\n      this.$refs.calendar.move(-1);\r\n\r\n    }\r\n    \r\n  },\r\n\r\n  methods: {\r\n\r\n    fireAppointment({ event }) {\r\n      this.selectedId = event.id\r\n      this.togglePreviewAppDialog()\r\n    },\r\n\r\n    openNewAppointment(patient, doctor) {\r\n      this.selectedPatient = patient\r\n      this.selectedDoctor = doctor\r\n      this.toggleNewDialog()\r\n      this.toggleNewAppDialog()\r\n    },\r\n\r\n    async getAppointments(id) {\r\n      let appointments = await this.getAppointmentsByDepartment({ id: id })\r\n      for(let i = 0; i < appointments.length; i++) {\r\n        this.appointments.push({\r\n          id: `${appointments[i].id}`,\r\n          name: `${appointments[i].patientName} - ${appointments[i].doctorName}`,\r\n          start: appointments[i].startDateTime,\r\n          end: appointments[i].endDateTime\r\n        })\r\n      }\r\n    },\r\n\r\n    togglePreviewAppDialog() {\r\n      this.previewAppDialog = !this.previewAppDialog\r\n    },\r\n\r\n\r\n    toggleNewAppDialog() {\r\n      this.newAppDialog = !this.newAppDialog\r\n    },\r\n\r\n    toggleNewDialog() {\r\n      this.newDialog = !this.newDialog\r\n    },\r\n\r\n    intervalFormat(interval) {\r\n      return interval.time;\r\n    },\r\n    setToday() {\r\n      this.focus = \"\";\r\n    },\r\n    prev() {\r\n      this.$refs.calendar.prev();\r\n    },\r\n    next() {\r\n      this.$refs.calendar.next();\r\n    },\r\n\r\n    ...mapActions({\r\n      getDepartments: \"department/getDepartments\",\r\n      getAppointmentsByDepartment: \"appointment/getAppointmentsByDepartment\"\r\n    })\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}